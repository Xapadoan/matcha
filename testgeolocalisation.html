<!DOCTYPE html>
<html>
	<head>
		<title>Geoloc</title>
		<meta charset="utf-8" />
	</head>
	<body>
		<style>
			p {
				border: 3px #000 solid;
				margin: 20px;
			}
		</style>
		<p id='lat'></p>
		<p id='long'></p>
		<p id='adress'></p>
	</body>
</html>
<script>
	function getPos() {
		return (new Promise((resolve, reject) => {
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition((pos) => {
					resolve({
						lat: pos.coords.latitude,
						long: pos.coords.longitude
					});
				}, (error) => {
					switch (error.code) {
						case (error.PERMISSION_DENIED):
							console.log('User refused geolocation');
							break;
						case (error.POSITION_UNAVAILABLE):
							console.log('Can\'t get location');
							break;
						case (error.TIMEOUT):
							console.log('Timeout');
							break;
						default:
							console.log('Undefined Error');
							break;
						
						reject('Error')
					}
					//Get location with ip
				});
			} else {
				reject('Location is not supported');
			}
		}));
	}

	getPos().then((pos) => {
		document.getElementById('lat').innerHTML = pos.lat;
		document.getElementById('long').innerHTML = pos.long;
	}).catch((reason) => {
		document.getElementById('lat').innerHTML = reason;
		document.getElementById('long').innerHTML = reason;
	});
	</script>