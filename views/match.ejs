<!DOCTYPE html>
<html lang="fr">
<%- include('head.ejs') %>
<body>
	<script>
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition((pos) => {
				var lat = pos.coords.latitude;
				var long = pos.coords.longitude;
			}, (error) => {
				switch (error.code) {
					case (error.PERMISSION_DENIED):
						console.log('User refused geolocation');
						break;
					case (error.POSITION_UNAVAILABLE):
						console.log('Can\'t get location');
						break;
					case (error.TIMEOUT):
						console.log('Timeout');
						break;
					default:
						console.log('Undefined Error');
						break;
				}
				lat = document.getElementById('lat').innerHTML;
				lng = document.getElementById('lng').innerHTML;
			});
		} else {
			lat = document.getElementById('lat').innerHTML;
			lng = document.getElementById('lng').innerHTML;
		}
		console.log('lat : ' + lat + '; long = ' + long);
	</script>
	<%- include('header.ejs') %>
	<p>Pour le moment, les matchs ne sont pas disponibles, mais on peut recup√©rer ici la localisation de l'utilisateur :
	</p>
	<p class='hidden' id='lat'><%= location.lat %></p>
	<p class="hidden" id='lng'><%= location.lng %></p>
	<% for (var i in locals.matchs) { %>
		<style>
			#user<%= matchs[i].id %> {
				border: 2px solid #f00;
				background-image: url('user_images/<%= matchs[i].image1 %>');
				background-size: cover;
				width: 400px;
				height: 550px;
				color: white;
				text-shadow: 0 0 10px black;
			}
		</style>
		<article id='user<%= matchs[i].id %>' class='public_profile'>
			<p><%= matchs[i].firstname %> <%= matchs[i].lastname %>, <%= matchs[i].age %></p>
			<p><%= matchs[i].fruit %> (<%= matchs[i].gender %>)</p>
		</article>
	<% } %>
</body>

</html>